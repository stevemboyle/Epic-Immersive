(function(){function f(){}function l(a){return g.retinaImageSuffix+a}function e(a,c){this.path=a||"";if(typeof c!=="undefined"&&c!==null){this.at_2x_path=c;this.perform_check=false}else{if(undefined!==document.createElement){var b=document.createElement("a");b.href=this.path;b.pathname=b.pathname.replace(m,l);this.at_2x_path=b.href}else{b=this.path.split("?");b[0]=b[0].replace(m,l);this.at_2x_path=b.join("?")}this.perform_check=true}}function k(a){this.el=a;this.path=new e(this.el.getAttribute("src"),
this.el.getAttribute("data-at2x"));var c=this;this.path.check_2x_variant(function(b){b&&c.swap()})}var d=typeof exports==="undefined"?window:exports,g={retinaImageSuffix:"@2x",check_mime_type:true,force_original_dimensions:true};d.Retina=f;f.configure=function(a){if(a===null)a={};for(var c in a)if(a.hasOwnProperty(c))g[c]=a[c]};f.init=function(a){if(a===null)a=d;a.addEventListener("load",function(){var c=document.getElementsByTagName("img"),b=c.length,h=[],i,j;for(i=0;i<b;i+=1){j=c[i];j.getAttributeNode("data-no-retina")||
j.src&&h.push(new k(j))}})};f.isRetina=function(){if(d.devicePixelRatio>1)return true;if(d.matchMedia&&d.matchMedia("(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)").matches)return true;return false};var m=/\.[\w\?=]+$/;d.RetinaImagePath=e;e.confirmed_paths=[];e.prototype.is_external=function(){return!!(this.path.match(/^https?\:/i)&&!this.path.match("//"+document.domain))};e.prototype.check_2x_variant=function(a){var c,
b=this;if(!this.perform_check&&typeof this.at_2x_path!=="undefined"&&this.at_2x_path!==null)return a(true);else if(this.at_2x_path in e.confirmed_paths)return a(true);else if(this.is_external())return a(false);else{c=new XMLHttpRequest;c.open("HEAD",this.at_2x_path);c.onreadystatechange=function(){if(c.readyState!==4)return a(false);if(c.status>=200&&c.status<=399){if(g.check_mime_type){var h=c.getResponseHeader("Content-Type");if(h===null||!h.match(/^image/i))return a(false)}e.confirmed_paths.push(b.at_2x_path);
return a(true)}else return a(false)};c.send()}};d.RetinaImage=k;k.prototype.swap=function(a){function c(){if(b.el.complete){if(g.force_original_dimensions)if(b.el.offsetWidth==0&&b.el.offsetHeight==0){b.el.setAttribute("width",b.el.naturalWidth);b.el.setAttribute("height",b.el.naturalHeight)}else{b.el.setAttribute("width",b.el.offsetWidth);b.el.setAttribute("height",b.el.offsetHeight)}b.el.setAttribute("src",a)}else setTimeout(c,5)}if(typeof a==="undefined")a=this.path.at_2x_path;var b=this;c()};
f.isRetina()&&f.init(d)})();
